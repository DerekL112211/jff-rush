# ğŸ¯ æ¯å€‹å‹•ä½œç¨ç«‹ Hitbox ç³»çµ±

## âœ¨ æ–°åŠŸèƒ½

ç¾åœ¨æ¯å€‹å‹•ä½œï¼ˆspriteï¼‰éƒ½å¯ä»¥æœ‰è‡ªå·±ç¨ç«‹çš„ hitboxï¼é€™æ¨£æ›´ç¬¦åˆå¯¦éš›æƒ…æ³ï¼š

### ç‚ºä»€éº¼éœ€è¦ä¸åŒçš„ Hitboxï¼Ÿ

- **Idleï¼ˆç«™ç«‹ï¼‰** - ç›´ç«‹å§¿å‹¢ï¼Œhitbox è¼ƒé«˜
- **Runï¼ˆå¥”è·‘ï¼‰** - èº«é«”ç¨å¾®å‰å‚¾ï¼Œhitbox å¯èƒ½ç•¥å¯¬
- **Jumpï¼ˆè·³èºï¼‰** - èº«é«”å¯èƒ½æ”¶ç¸®ï¼Œhitbox è¼ƒå°
- **Fallï¼ˆä¸‹è½ï¼‰** - é¡ä¼¼è·³èºï¼Œä½†å§¿å‹¢ä¸åŒ
- **Attackï¼ˆæ”»æ“Šï¼‰** - èº«é«”ä¼¸å±•ï¼Œhitbox æœƒæ”¹è®Š
- **TakeHitï¼ˆå—æ“Šï¼‰** - èº«é«”å¾Œä»°ï¼Œhitbox ä¸åŒ
- **Deathï¼ˆæ­»äº¡ï¼‰** - å€’åœ°å§¿å‹¢ï¼Œhitbox è®Šå°è®ŠçŸ®
- **Blockï¼ˆé˜²ç¦¦ï¼‰** - é˜²ç¦¦å§¿å‹¢ï¼Œå¯èƒ½è¹²ä½æˆ–ç¸®å°

## ğŸ”§ å¦‚ä½•é‹ä½œ

### 1. ç³»çµ±æ¶æ§‹

```javascript
// Fighter.js ç¾åœ¨æ”¯æŒï¼š
- defaultHitbox: é»˜èªçš„ hitboxï¼ˆç”¨æ–¼æ²’æœ‰ç‰¹å®šè¨­ç½®çš„å‹•ä½œï¼‰
- spriteHitboxes: å­˜å„²æ¯å€‹ sprite çš„ç‰¹å®š hitbox
- updateHitbox(spriteName): è‡ªå‹•åˆ‡æ›åˆ°å°æ‡‰å‹•ä½œçš„ hitbox
```

### 2. è‡ªå‹•åˆ‡æ›

ç•¶è§’è‰²åˆ‡æ›å‹•ä½œæ™‚ï¼ˆé€šé `switchSprite()`ï¼‰ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
1. æª¢æŸ¥è©²å‹•ä½œæ˜¯å¦æœ‰ç‰¹å®šçš„ hitbox
2. å¦‚æœæœ‰ï¼Œä½¿ç”¨ç‰¹å®šçš„ hitbox
3. å¦‚æœæ²’æœ‰ï¼Œä½¿ç”¨é»˜èªçš„ hitbox

### 3. é…ç½®æ ¼å¼

```javascript
sprites: {
    idle: {
        imageSrc: './sprite/p1/idle.png',
        framesMax: 4,
        framesHold: 20,
        // ç‚ºé€™å€‹å‹•ä½œæŒ‡å®šç‰¹å®šçš„ hitbox
        hitbox: { 
            offset: { x: 16, y: 8 }, 
            width: 42, 
            height: 128 
        }
    },
    jump: {
        imageSrc: './sprite/p1/jump.png',
        framesMax: 4,
        framesHold: 30,
        loop: false,
        // è·³èºæ™‚çš„ hitbox å¯èƒ½æ›´å°
        hitbox: { 
            offset: { x: 18, y: 12 }, 
            width: 38, 
            height: 110 
        }
    }
}
```

## ğŸš€ ä½¿ç”¨è‡ªå‹•è¨ˆç®—å·¥å…·

### æ›´æ–°å¾Œçš„å·¥å…·åŠŸèƒ½

è‡ªå‹•è¨ˆç®—å·¥å…·ç¾åœ¨æœƒï¼š
1. âœ… åˆ†ææ¯å€‹å‹•ä½œçš„ç²¾éˆåœ–
2. âœ… ç‚ºæ¯å€‹å‹•ä½œè¨ˆç®—ç¨ç«‹çš„ hitbox
3. âœ… åœ¨é…ç½®ä»£ç¢¼ä¸­ç‚ºæ¯å€‹ sprite æ·»åŠ  hitbox å±¬æ€§
4. âœ… åŒæ™‚ä¿ç•™ä¸€å€‹é»˜èª hitboxï¼ˆåŸºæ–¼ idle/run å¹³å‡å€¼ï¼‰

### ä½¿ç”¨æ­¥é©Ÿ

1. **æ‰“é–‹å·¥å…·**
   ```
   file:///z:/JFFT/Games/jff-rush/auto-calculate-hitbox.html
   ```

2. **é»æ“Šã€Œé–‹å§‹è‡ªå‹•åˆ†æã€**
   å·¥å…·æœƒåˆ†ææ‰€æœ‰ 8 å€‹å‹•ä½œ

3. **æŸ¥çœ‹çµæœ**
   æ¯å€‹å‹•ä½œéƒ½æœƒæœ‰è‡ªå·±çš„ hitbox æ•¸æ“šï¼š
   ```
   idle: offset(16, 8), size(42x128)
   run: offset(15, 9), size(44x126)
   jump: offset(18, 12), size(38x110)
   attack: offset(12, 10), size(50x125)
   ...
   ```

4. **è¤‡è£½ä¸¦æ‡‰ç”¨**
   ç”Ÿæˆçš„é…ç½®ä»£ç¢¼ä¸­ï¼Œæ¯å€‹ sprite éƒ½åŒ…å«äº† `hitbox` å±¬æ€§

## ğŸ“Š å¯¦éš›æ•ˆæœå°æ¯”

### ä¹‹å‰ï¼ˆå–®ä¸€ Hitboxï¼‰
```javascript
// æ‰€æœ‰å‹•ä½œéƒ½ä½¿ç”¨åŒä¸€å€‹ hitbox
hitbox: { offset: { x: 40, y: 20 }, width: 40, height: 130 }

å•é¡Œï¼š
âŒ è·³èºæ™‚ hitbox å¤ªå¤§ï¼ˆè§’è‰²æ”¶ç¸®äº†ä½†ç¢°æ’ç®±æ²’è®Šï¼‰
âŒ æ”»æ“Šæ™‚ hitbox ä¸æº–ç¢ºï¼ˆèº«é«”ä¼¸å±•äº†ä½†ç¢°æ’ç®±æ²’è®Šï¼‰
âŒ æ­»äº¡æ™‚ hitbox é‚„æ˜¯ç«™ç«‹å¤§å°ï¼ˆå·²ç¶“å€’åœ°äº†ï¼‰
```

### ç¾åœ¨ï¼ˆå‹•æ…‹ Hitboxï¼‰
```javascript
// æ¯å€‹å‹•ä½œæœ‰ç¨ç«‹çš„ hitbox
idle: { hitbox: { offset: { x: 16, y: 8 }, width: 42, height: 128 } }
jump: { hitbox: { offset: { x: 18, y: 12 }, width: 38, height: 110 } }  // æ›´å°
death: { hitbox: { offset: { x: 20, y: 60 }, width: 80, height: 40 } }  // çŸ®ä¸”å¯¬

å„ªé»ï¼š
âœ… è·³èºæ™‚ hitbox è®Šå°ï¼Œæ›´é›£è¢«æ‰“ä¸­ï¼ˆæ›´çœŸå¯¦ï¼‰
âœ… æ”»æ“Šæ™‚ hitbox æº–ç¢ºåæ˜ èº«é«”å»¶ä¼¸
âœ… æ­»äº¡æ™‚ hitbox è®Šæˆæ©«èººçš„å½¢ç‹€
âœ… æ¯å€‹å‹•ä½œçš„ç¢°æ’éƒ½ç²¾ç¢º
```

## ğŸ® éŠæˆ²é«”é©—æå‡

### 1. æ›´ç²¾ç¢ºçš„ç¢°æ’
- è§’è‰²è·³èºæ™‚ä¸æœƒå› ç‚ºã€Œç©ºæ°£ã€è€Œç¢°æ’
- æ”»æ“Šæ™‚èº«é«”ä¼¸å±•ä¸æœƒå°è‡´éŒ¯èª¤ç¢°æ’

### 2. æ›´å¥½çš„éŠæˆ²å¹³è¡¡
- é˜²ç¦¦è¹²ä¸‹æ™‚ hitbox è®Šå° â†’ æ›´é›£è¢«æ“Šä¸­
- æ”»æ“Šä¼¸å±•æ™‚ hitbox è®Šå¤§ â†’ æœ‰é¢¨éšªæœ‰å›å ±

### 3. æ›´çœŸå¯¦çš„ç‰©ç†
- æ­»äº¡å€’åœ°æ™‚ç¢°æ’ç®±æœƒè®Šæˆæ©«å‘
- è·³èºæ”¶ç¸®æ™‚æ›´é›£è¢«æ“Šä¸­

## ğŸ” èª¿è©¦åŠŸèƒ½

å¦‚æœæƒ³çœ‹åˆ°æ¯å€‹å‹•ä½œçš„ hitbox è®ŠåŒ–ï¼Œåœ¨ `Fighter.js` çš„ `draw()` æ–¹æ³•ä¸­æ·»åŠ ï¼š

```javascript
draw(c) {
    // ... ç¹ªè£½ç²¾éˆ ...
    
    // èª¿è©¦ï¼šé¡¯ç¤ºç•¶å‰ hitbox
    const hitbox = this.getHitbox();
    c.strokeStyle = 'lime';
    c.lineWidth = 2;
    c.strokeRect(hitbox.x, hitbox.y, hitbox.width, hitbox.height);
    
    // é¡¯ç¤ºç•¶å‰å‹•ä½œåç¨±
    c.fillStyle = 'white';
    c.font = '12px Arial';
    c.fillText(this.currentSprite, hitbox.x, hitbox.y - 5);
}
```

é€™æ¨£ä½ å°±èƒ½å¯¦æ™‚çœ‹åˆ° hitbox éš¨è‘—å‹•ä½œè®ŠåŒ–ï¼

## ğŸ“‹ é…ç½®ç¯„ä¾‹

```javascript
export default {
    name: 'G-Li',
    scale: 0.4,
    
    // é»˜èª hitboxï¼ˆå‚™ç”¨ï¼‰
    hitbox: {
        offset: { x: 16, y: 8 },
        width: 42,
        height: 128
    },
    
    sprites: {
        idle: {
            imageSrc: './sprite/p1/idle.png',
            framesMax: 4,
            framesHold: 20,
            hitbox: { offset: { x: 16, y: 8 }, width: 42, height: 128 }
        },
        run: {
            imageSrc: './sprite/p1/run.png',
            framesMax: 4,
            framesHold: 20,
            hitbox: { offset: { x: 15, y: 9 }, width: 44, height: 126 }
        },
        jump: {
            imageSrc: './sprite/p1/jump.png',
            framesMax: 4,
            framesHold: 30,
            loop: false,
            hitbox: { offset: { x: 18, y: 12 }, width: 38, height: 110 }
        },
        death: {
            imageSrc: './sprite/p1/death.png',
            framesMax: 4,
            framesHold: 8,
            loop: false,
            hitbox: { offset: { x: 10, y: 50 }, width: 80, height: 40 }  // å€’åœ°å§¿å‹¢
        }
        // ... å…¶ä»–å‹•ä½œ
    }
};
```

## ğŸ¯ ç¸½çµ

ç¾åœ¨ä½ çš„æ ¼é¬¥éŠæˆ²æœ‰äº†**å°ˆæ¥­ç´šçš„ç¢°æ’ç³»çµ±**ï¼š
- âœ… æ¯å€‹å‹•ä½œéƒ½æœ‰ç²¾ç¢ºçš„ hitbox
- âœ… è‡ªå‹•å·¥å…·ä¸€éµç”Ÿæˆæ‰€æœ‰é…ç½®
- âœ… å‹•æ…‹åˆ‡æ›ï¼Œç„¡éœ€æ‰‹å‹•ç®¡ç†
- âœ… éŠæˆ²é«”é©—å¤§å¹…æå‡

é€™å°±æ˜¯ AAA ç´šæ ¼é¬¥éŠæˆ²çš„æ¨™æº–åšæ³•ï¼ğŸ®âœ¨
