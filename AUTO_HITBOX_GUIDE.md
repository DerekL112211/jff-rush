# 🤖 自動計算 Hitbox - 快速指南

## 🚀 超簡單使用方法

### 步驟 1: 打開自動計算工具
在瀏覽器中打開：
```
file:///z:/JFFT/Games/jff-rush/auto-calculate-hitbox.html
```

### 步驟 2: 點擊按鈕
點擊「🚀 開始自動分析 G-Li 角色」按鈕

### 步驟 3: 等待完成
工具會自動：
- ✅ 分析所有 8 個精靈圖（idle, run, jump, fall, attack, takeHit, death, block）
- ✅ 檢測每個精靈的非透明區域
- ✅ 計算 idle 和 run 的平均值作為主要 hitbox
- ✅ 應用 scale 0.4 的縮放
- ✅ 生成完整的配置代碼

### 步驟 4: 複製代碼
點擊「📋 複製配置代碼」按鈕

### 步驟 5: 更新角色配置
將複製的代碼貼到 `js/config/characters/gli.js` 文件中

## ✨ 完成！

就這麼簡單！不需要手動測量、不需要猜測，工具會自動計算出最佳的 hitbox 設置。

## 🎯 工具特點

### 自動化
- 🤖 一鍵分析所有精靈圖
- 📊 自動計算平均值
- 🔄 自動應用縮放比例
- 📝 自動生成配置代碼

### 視覺化反饋
- 📈 實時進度條
- 📋 詳細日誌輸出
- ✅ 每個精靈的分析結果
- 🎨 建議的 hitbox 配置

### 智能計算
- 使用 idle 和 run 的平均值（最常見的動作）
- 自動處理縮放比例
- 提供所有精靈的詳細數據供參考

## ⚙️ 可調整參數

### 透明度閾值 (Alpha Threshold)
- **預設值**: 50
- **範圍**: 0-255
- **說明**: 
  - 值越低 = Hitbox 越大（包含更多半透明像素）
  - 值越高 = Hitbox 越小（只包含不透明像素）
  - 推薦保持預設值 50

## 📊 輸出結果

工具會生成：
1. **主要 Hitbox 配置** - 基於 idle/run 平均值
2. **完整的角色配置代碼** - 可以直接使用
3. **詳細數據註釋** - 所有精靈的個別 hitbox 數據

## 🔄 對比

### 之前（手動方法）
1. ❌ 打開圖片編輯器
2. ❌ 測量非透明區域
3. ❌ 手動計算 offset
4. ❌ 手動計算縮放後的值
5. ❌ 手動輸入到配置文件
6. ❌ 測試和調整（多次重複）

### 現在（自動方法）
1. ✅ 打開工具
2. ✅ 點擊按鈕
3. ✅ 複製代碼
4. ✅ 完成！

## 💡 使用技巧

### 如果 Hitbox 太大
- 增加透明度閾值（例如 80-100）
- 這會排除更多半透明像素

### 如果 Hitbox 太小
- 降低透明度閾值（例如 20-30）
- 這會包含更多半透明像素

### 查看詳細數據
- 在生成的代碼底部有所有精靈的詳細數據
- 可以參考特定動作的 hitbox（例如 attack）

## 🎮 實際效果

使用這個工具後：
- ✅ Hitbox 精確匹配角色身體
- ✅ 沒有不必要的透明區域
- ✅ 碰撞檢測更準確
- ✅ 遊戲體驗更好

## 📝 範例輸出

```javascript
// 自動計算的 Hitbox (基於 idle/run 平均值)
hitbox: {
    offset: { x: 16, y: 8 },
    width: 42,
    height: 128
},
```

這些數值是基於實際像素分析，比手動估計準確得多！

## 🔧 技術細節

工具的運作流程：
1. 載入每個精靈圖
2. 使用 Canvas API 讀取像素數據
3. 掃描所有像素的 alpha 通道
4. 找出非透明區域的邊界
5. 計算 offset、width、height
6. 應用角色的 scale 值
7. 計算多個精靈的平均值
8. 生成配置代碼

## ❓ 常見問題

**Q: 需要安裝什麼嗎？**
A: 不需要！純瀏覽器工具，打開 HTML 就能用。

**Q: 可以用於其他角色嗎？**
A: 可以！只需修改工具中的角色配置部分。

**Q: 生成的 hitbox 需要調整嗎？**
A: 通常不需要，但可以根據遊戲平衡性微調。

**Q: 每次更新精靈圖都要重新計算嗎？**
A: 是的，如果精靈圖改變了，建議重新計算。

## 🎉 享受自動化的便利！

再也不用手動測量 hitbox 了！
